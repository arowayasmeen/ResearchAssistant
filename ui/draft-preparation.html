<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResearchAssistant - Draft Preparation</title>
    <link rel="stylesheet" href="css/paper.css">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            <span class="tooltip">Home</span>
        </div>
        <div class="sidebar-icon">
            <img src="images/spyglass.png" alt="spyglass" class="icon-image">
            <span class="tooltip">Literature Review</span>
        </div> 
        <div class="sidebar-icon">
            <img src="images/helm.png" alt="helm" class="icon-image">
            <span class="tooltip">Generate Ideas</span>
        </div>
        <div class="sidebar-icon">
            <img src="images/quill.png" alt="quill" class="icon-image">
            <span class="tooltip">Prepare a Draft</span>
        </div>
    </div>

    <div class="main-container">
        <!-- Fixed Header -->
        <div class="fixed-header">
            <h1 class="logo">ResearchAssistant<span class="logo-emoji"></span></h1>
            <div class="slogan">Navigate the seas of academic knowledge</div>
            <div class="research-header">
                <h2>Prepare a Research Paper Draft on <span class="topic-name">Chemistry</span></h2>
            </div>
        </div>
        
        <!-- Content Area with Left and Right Panes -->
        <div class="content-area">
            <!-- Left Pane: Brainstorm and Author Info -->
            <div class="left-pane">
                <div class="paper-title-section">
                    <div class="section-title">Paper Title</div>
                    <div id="title-display"></div>

                    <div class="title-buttons">
                        <button id="brainstorm-button" class="nautical-button">Brainstorm Paper Title Ideas</button>
                        <button id="enter-title-button" class="nautical-button secondary">Enter a Paper Title</button>
                    </div>

                    <div id="title-input-container" style="display: none;">
                        <input type="text" id="title-input" class="research-input" placeholder="Enter your paper title here...">
                        <button id="save-title-button" class="nautical-button">Save Title</button>
                    </div>

                    <div id="title-suggestions" style="display: none; margin-top: 20px;">
                        <div class="section-title">Suggested Titles</div>
                        <div id="suggestions-container"></div>
                        <button id="refresh-titles-button" class="nautical-button secondary" style="margin-top: 10px;">Refresh Suggestions</button>
                    </div>
                </div>

                <!-- Author information form -->
                <div id="author-info-section">
                    <div class="section-title">Author Information</div>
                    <div class="author-form">
                        <div class="form-group">
                            <label for="author-name" class="form-label">Author Name:</label>
                            <input type="text" id="author-name" class="input-field" placeholder="Enter your name...">
                        </div>
                        <div class="form-group">
                            <label for="author-institution" class="form-label">Institution:</label>
                            <input type="text" id="author-institution" class="input-field" placeholder="Enter your institution...">
                        </div>
                    </div>
                    <button id="update-author-info-button" class="nautical-button">Update Author Information</button>
                </div>

                <!-- Draft Section -->
                <div class="draft-section" id="draft-section" style="display: none;">
                    <div class="section-title">Paper Outline</div>
                    <textarea id="outline-area" class="outline-area" placeholder="Your paper outline will appear here..."></textarea>

                    <div class="button-container">
                        <button id="generate-outline-button" class="nautical-button">Generate Outline</button>
                        <button id="edit-outline-button" class="nautical-button secondary">Edit Outline</button>
                        <button id="save-outline-button" class="nautical-button" style="display: none;">Save Outline</button>
                        <button id="generate-paper-button" class="nautical-button" style="background-color: #0a4d7c; color: white;">Generate Full Paper</button>
                    </div>
                </div>
            </div>
            
            <!-- Right Pane: Editor -->
            <div class="right-pane">
                <!-- LaTeX Section -->
                <div class="latex-section" id="paper-section" style="display: none;">
                    <div class="section-title">Research Paper Draft</div>
                    
                    <div class="tab-container">
                        <div class="tab active" data-tab="doc">Doc Editor</div>
                        <div class="tab" data-tab="latex">LaTeX Source</div>
                        <div class="tab" data-tab="preview">PDF Preview</div>
                    </div>
                    
                    <!-- Document Editor Section -->
                    <div class="tab-content active" id="doc-tab">
                        <div class="document-editor-container">
                            <div id="document-editor" contenteditable="true" class="document-editor">
                                <h2>Start Writing</h2>
                                <p>This is your editable paper preview. You can apply outline data or LaTeX source here.</p>
                            </div>
                            <div class="editor-footer">
                                <button class="secondary-button">Export</button>
                                <button class="primary-button">Save</button>
                            </div>
                        </div>
                    </div>

                    <!-- LaTeX Editor Section -->
                    <div class="tab-content" id="latex-tab">
                        <textarea id="latex-editor" class="latex-editor" placeholder="LaTeX source will appear here..."></textarea>
                        <div class="button-container">
                            <button id="edit-latex-button" class="action-button">Edit LaTeX</button>
                            <button id="save-latex-button" class="action-button" style="display: none;">Save Changes</button>
                            <button id="compile-button" class="action-button">Compile to PDF</button>
                        </div>
                    </div>

                    <!-- Preview Section -->
                    <div class="tab-content" id="preview-tab">
                        <div class="pdf-preview" id="pdf-preview">
                            <div class="preview-placeholder" id="preview-placeholder">
                                <p>PDF preview will appear here after compilation</p>
                            </div>
                        </div>
                        <div class="button-container">
                            <button id="download-pdf-button" class="action-button">Download PDF</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/latex.js"></script>
    <script src="js/paper.js"></script>
    <script>
        // Add JavaScript for collapsible sections and tab switching
        document.addEventListener('DOMContentLoaded', function() {
            const toggleLatexSection = document.getElementById('toggle-latex-section');
            const latexSectionContent = document.getElementById('latex-section-content');
            
            if (toggleLatexSection && latexSectionContent) {
                toggleLatexSection.addEventListener('click', function() {
                    latexSectionContent.classList.toggle('collapsed');
                    toggleLatexSection.classList.toggle('collapsed');
                });
            }

            // Map tooltips (or any identifier) to page URLs
            const pageMap = {
                "Home": "index.html",
                "Literature Review": "literature-review.html",
                "Generate Ideas": "generate-ideas.html",
                "Prepare a Draft": "draft-preparation.html"
            };

            // Select all sidebar icons
            document.querySelectorAll('.sidebar-icon').forEach(icon => {
                const tooltip = icon.querySelector('.tooltip');
                if (tooltip && pageMap[tooltip.textContent]) {
                    icon.addEventListener('click', () => {
                        window.location.href = pageMap[tooltip.textContent];
                    });
                }
            });
            

            
            // Make paper section visible by default for testing
            document.getElementById('paper-section').style.display = 'block';
        });
    </script>
</body>
</html>